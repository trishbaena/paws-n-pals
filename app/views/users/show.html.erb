<%= render 'navbar' %>

<div class="main-container">

  <div class="container text-center my-4">
    <h1 class="font-weight-bold"><%= @user.email %>'s Profile</h1>
  </div>

  <div class="container my-4">
    <div class="row">
      <h2>Outfits</h2>
      <div class="d-flex flex-row flex-wrap overflow-auto">
        <% @outfits.each do |outfit| %>
          <div class="card mx-2" style="width: 200px;">
            <img src="<%= outfit.photo_url %>" class="card-img-top" style="height: 200px; object-fit: cover;" alt="<%= outfit.name %>">
            <div class="card-body">
              <h5 class="card-title"><%= outfit.name %></h5>
              <p class="card-text">Price: <%= outfit.price %></p>
                <% if user_signed_in? && current_user.id == @user.id %>
                  <%= link_to 'View', outfit_path(outfit), class: 'btn btn-primary' %>
                  <%= link_to 'Edit', edit_outfit_path(outfit), class: 'btn btn-secondary' %>
                  <%= link_to 'Delete', outfit_path(outfit), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}, class: 'btn btn-danger'%>
                <% else %>
                  <%= link_to 'View', outfit_path(outfit), class: 'btn btn-primary d-block' %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>

  <% if user_signed_in? && current_user == @user %>
    <div class="container my-4">
      <div class="row">
        <h2>Your requests</h2>
        <div class="d-flex flex-row flex-nowrap overflow-auto">
          <% @requests_made.each do |request| %>
            <div class="card mx-2" style="width: 200px;">
              <div class="card-body">
                <h5 class="card-title"><%= request.outfit.name %></h5>
                <p class="card-text"><%= request.status %></p>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <div class="container my-4">
      <div class="row">
        <h2>Received requests</h2>
        <div class="d-flex flex-row flex-nowrap overflow-auto">
          <% @requests_received.each do |request| %>
            <div class="card mx-2" style="width: 200px;">
              <div class="card-body">
                <h5 class="card-title"><%= request.outfit.name %></h5>
                <p class="card-text"><%= request.status %></p>
                <%= link_to 'Edit Request', edit_outfit_request_path(request.outfit, request), class: 'btn btn-secondary' %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>
<%= render 'footer' %>
